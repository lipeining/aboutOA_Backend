webpackJsonp([171],{"/Djd":function(e,t,a){var r={"./78-EUC-H.bcmap":["0lHY",168],"./78-EUC-V.bcmap":["8cwC",167],"./78-H.bcmap":["Hj0Y",166],"./78-RKSJ-H.bcmap":["rDt0",165],"./78-RKSJ-V.bcmap":["69NQ",164],"./78-V.bcmap":["OfM+",163],"./78ms-RKSJ-H.bcmap":["uB/y",162],"./78ms-RKSJ-V.bcmap":["h5K9",161],"./83pv-RKSJ-H.bcmap":["9WfI",160],"./90ms-RKSJ-H.bcmap":["0WCd",159],"./90ms-RKSJ-V.bcmap":["IlPF",158],"./90msp-RKSJ-H.bcmap":["JgNn",157],"./90msp-RKSJ-V.bcmap":["vmWD",156],"./90pv-RKSJ-H.bcmap":["yxD0",155],"./90pv-RKSJ-V.bcmap":["5WXK",154],"./Add-H.bcmap":["xhCb",153],"./Add-RKSJ-H.bcmap":["6VbT",152],"./Add-RKSJ-V.bcmap":["RLMU",151],"./Add-V.bcmap":["yp9I",150],"./Adobe-CNS1-0.bcmap":["hUem",149],"./Adobe-CNS1-1.bcmap":["ino3",148],"./Adobe-CNS1-2.bcmap":["ibfO",147],"./Adobe-CNS1-3.bcmap":["GiTj",146],"./Adobe-CNS1-4.bcmap":["hsjj",145],"./Adobe-CNS1-5.bcmap":["YRpi",144],"./Adobe-CNS1-6.bcmap":["w8o3",143],"./Adobe-CNS1-UCS2.bcmap":["rX6d",142],"./Adobe-GB1-0.bcmap":["iD5p",141],"./Adobe-GB1-1.bcmap":["4jEs",140],"./Adobe-GB1-2.bcmap":["Afaj",139],"./Adobe-GB1-3.bcmap":["toY7",138],"./Adobe-GB1-4.bcmap":["faDD",137],"./Adobe-GB1-5.bcmap":["4gVq",136],"./Adobe-GB1-UCS2.bcmap":["L8gf",135],"./Adobe-Japan1-0.bcmap":["hIDG",134],"./Adobe-Japan1-1.bcmap":["iPSW",133],"./Adobe-Japan1-2.bcmap":["S/ep",132],"./Adobe-Japan1-3.bcmap":["YhiS",131],"./Adobe-Japan1-4.bcmap":["wm/L",130],"./Adobe-Japan1-5.bcmap":["Zkyi",129],"./Adobe-Japan1-6.bcmap":["aB41",128],"./Adobe-Japan1-UCS2.bcmap":["2Us0",127],"./Adobe-Korea1-0.bcmap":["Mv2w",126],"./Adobe-Korea1-1.bcmap":["s/Eq",125],"./Adobe-Korea1-2.bcmap":["3o6+",124],"./Adobe-Korea1-UCS2.bcmap":["SV2h",123],"./B5-H.bcmap":["HF7q",122],"./B5-V.bcmap":["fwp9",121],"./B5pc-H.bcmap":["rWMu",120],"./B5pc-V.bcmap":["xFEU",119],"./CNS-EUC-H.bcmap":["B0Kb",118],"./CNS-EUC-V.bcmap":["azx/",117],"./CNS1-H.bcmap":["p4ms",116],"./CNS1-V.bcmap":["9eW7",115],"./CNS2-H.bcmap":["zc6H",114],"./CNS2-V.bcmap":["dvni",113],"./ETHK-B5-H.bcmap":["EOs2",112],"./ETHK-B5-V.bcmap":["3Wsc",111],"./ETen-B5-H.bcmap":["gQjr",110],"./ETen-B5-V.bcmap":["kLXg",109],"./ETenms-B5-H.bcmap":["imo+",108],"./ETenms-B5-V.bcmap":["zm2u",107],"./EUC-H.bcmap":["Q2D6",106],"./EUC-V.bcmap":["k2qw",105],"./Ext-H.bcmap":["YgQs",104],"./Ext-RKSJ-H.bcmap":["hIym",103],"./Ext-RKSJ-V.bcmap":["N32G",102],"./Ext-V.bcmap":["M1wV",101],"./GB-EUC-H.bcmap":["HcIz",100],"./GB-EUC-V.bcmap":["UJd/",99],"./GB-H.bcmap":["IhXA",98],"./GB-V.bcmap":["hcdP",97],"./GBK-EUC-H.bcmap":["1Knm",96],"./GBK-EUC-V.bcmap":["YMus",95],"./GBK2K-H.bcmap":["nBsz",94],"./GBK2K-V.bcmap":["vkSo",93],"./GBKp-EUC-H.bcmap":["dk46",92],"./GBKp-EUC-V.bcmap":["cDOd",91],"./GBT-EUC-H.bcmap":["DdPg",90],"./GBT-EUC-V.bcmap":["hqV7",89],"./GBT-H.bcmap":["7XA5",88],"./GBT-V.bcmap":["qhQE",87],"./GBTpc-EUC-H.bcmap":["1Eun",86],"./GBTpc-EUC-V.bcmap":["849d",85],"./GBpc-EUC-H.bcmap":["A4XZ",84],"./GBpc-EUC-V.bcmap":["an5Q",83],"./H.bcmap":["jg+6",82],"./HKdla-B5-H.bcmap":["dKoA",81],"./HKdla-B5-V.bcmap":["Axzi",80],"./HKdlb-B5-H.bcmap":["Z6Fe",79],"./HKdlb-B5-V.bcmap":["Swbl",78],"./HKgccs-B5-H.bcmap":["4mx8",77],"./HKgccs-B5-V.bcmap":["TbQ6",76],"./HKm314-B5-H.bcmap":["zfm+",75],"./HKm314-B5-V.bcmap":["lr6o",74],"./HKm471-B5-H.bcmap":["EyHw",73],"./HKm471-B5-V.bcmap":["YRl9",72],"./HKscs-B5-H.bcmap":["mP3G",71],"./HKscs-B5-V.bcmap":["6sQV",70],"./Hankaku.bcmap":["Boma",69],"./Hiragana.bcmap":["Aqml",68],"./KSC-EUC-H.bcmap":["RBad",67],"./KSC-EUC-V.bcmap":["C6eU",66],"./KSC-H.bcmap":["Q2pl",65],"./KSC-Johab-H.bcmap":["330r",64],"./KSC-Johab-V.bcmap":["jriO",63],"./KSC-V.bcmap":["qRx5",62],"./KSCms-UHC-H.bcmap":["xEph",61],"./KSCms-UHC-HW-H.bcmap":["JSwJ",60],"./KSCms-UHC-HW-V.bcmap":["G/Oj",59],"./KSCms-UHC-V.bcmap":["/RsT",58],"./KSCpc-EUC-H.bcmap":["D4WR",57],"./KSCpc-EUC-V.bcmap":["OqUO",56],"./Katakana.bcmap":["clhU",55],"./NWP-H.bcmap":["xDZB",54],"./NWP-V.bcmap":["lHHt",53],"./RKSJ-H.bcmap":["1bQs",52],"./RKSJ-V.bcmap":["KD7s",51],"./Roman.bcmap":["KDYN",50],"./UniCNS-UCS2-H.bcmap":["bBFw",49],"./UniCNS-UCS2-V.bcmap":["ne9Q",48],"./UniCNS-UTF16-H.bcmap":["7mve",47],"./UniCNS-UTF16-V.bcmap":["fDmo",46],"./UniCNS-UTF32-H.bcmap":["oBG3",45],"./UniCNS-UTF32-V.bcmap":["R8UX",44],"./UniCNS-UTF8-H.bcmap":["9p4U",43],"./UniCNS-UTF8-V.bcmap":["mrGD",42],"./UniGB-UCS2-H.bcmap":["8bey",41],"./UniGB-UCS2-V.bcmap":["lngy",40],"./UniGB-UTF16-H.bcmap":["Jjcy",39],"./UniGB-UTF16-V.bcmap":["0PdA",38],"./UniGB-UTF32-H.bcmap":["nl8J",37],"./UniGB-UTF32-V.bcmap":["k/6v",36],"./UniGB-UTF8-H.bcmap":["5y08",35],"./UniGB-UTF8-V.bcmap":["Mx+T",34],"./UniJIS-UCS2-H.bcmap":["h4hU",33],"./UniJIS-UCS2-HW-H.bcmap":["Uz5R",32],"./UniJIS-UCS2-HW-V.bcmap":["LdTY",31],"./UniJIS-UCS2-V.bcmap":["cBwd",30],"./UniJIS-UTF16-H.bcmap":["+S0o",29],"./UniJIS-UTF16-V.bcmap":["VEBc",28],"./UniJIS-UTF32-H.bcmap":["m4Cs",27],"./UniJIS-UTF32-V.bcmap":["dWl0",26],"./UniJIS-UTF8-H.bcmap":["leWl",25],"./UniJIS-UTF8-V.bcmap":["ulcQ",24],"./UniJIS2004-UTF16-H.bcmap":["fZfZ",23],"./UniJIS2004-UTF16-V.bcmap":["yeFf",22],"./UniJIS2004-UTF32-H.bcmap":["StCN",21],"./UniJIS2004-UTF32-V.bcmap":["4axz",20],"./UniJIS2004-UTF8-H.bcmap":["petH",19],"./UniJIS2004-UTF8-V.bcmap":["ebP/",18],"./UniJISPro-UCS2-HW-V.bcmap":["bJiI",17],"./UniJISPro-UCS2-V.bcmap":["eCeG",16],"./UniJISPro-UTF8-V.bcmap":["gGQY",15],"./UniJISX0213-UTF32-H.bcmap":["yvQh",14],"./UniJISX0213-UTF32-V.bcmap":["/rlZ",13],"./UniJISX02132004-UTF32-H.bcmap":["0dQZ",12],"./UniJISX02132004-UTF32-V.bcmap":["+GS9",11],"./UniKS-UCS2-H.bcmap":["fGKg",10],"./UniKS-UCS2-V.bcmap":["X3cO",9],"./UniKS-UTF16-H.bcmap":["TMpY",8],"./UniKS-UTF16-V.bcmap":["hTx4",7],"./UniKS-UTF32-H.bcmap":["kbYn",6],"./UniKS-UTF32-V.bcmap":["t4S0",5],"./UniKS-UTF8-H.bcmap":["6InH",4],"./UniKS-UTF8-V.bcmap":["oEkN",3],"./V.bcmap":["xBln",2],"./WP-Symbol.bcmap":["A12k",1]};function o(e){var t=r[e];return t?a.e(t[1]).then(function(){return a(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}o.keys=function(){return Object.keys(r)},o.id="/Djd",e.exports=o},0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},"60rW":function(e,t){},7:function(e,t){},8:function(e,t){},"8Y90":function(e,t){},AgTH:function(e,t){},AqaU:function(e,t){},E1ZE:function(e,t){},HcXV:function(e,t){},LGy8:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),o=a("NYxO"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(e){a("s347")},null,null).exports,i=a("/ocq"),c=a("d7EF"),l=a.n(c),p=a("Dd8w"),u=a.n(p),m=a("//Fk"),d=a.n(m),g=a("mvHQ"),h=a.n(g);r.default.use(o.a);var f=new o.a.Store({state:{userInfo:{},isLogin:0},getters:{getUserInfo:function(e){return e.userInfo},isLogin:function(e){return e.isLogin||(e.isLogin=parseInt(localStorage.getItem("isLogin"))||0,e.userInfo=JSON.parse(localStorage.getItem("userInfo"))||{}),e.isLogin},isAdmin:function(e){e.isLogin||(e.isLogin=parseInt(localStorage.getItem("isLogin"))||0,e.userInfo=JSON.parse(localStorage.getItem("userInfo"))||{});var t=e.userInfo.permission||0;return e.isLogin&&90===t}},mutations:{setUserInfo:function(e,t){e.userInfo=t,e.isLogin=1,localStorage.setItem("userInfo",h()(t)),localStorage.setItem("isLogin",e.isLogin)},delUserInfo:function(e){e.userInfo={},e.isLogin=0,localStorage.removeItem("userInfo"),localStorage.removeItem("isLogin")}},actions:{setUserInfo:function(e,t){(0,e.commit)("setUserInfo",t)},delUserInfo:function(e){(0,e.commit)("delUserInfo")}}}),v=a("GG98");function b(e){if(3===e.body.code)f.dispatch("delUserInfo"),Ye.push({name:"login"});else{if(5!==e.body.code)return 4===e.body.code?d.a.reject(e.body.Message.err):d.a.resolve(e.body.Message);Ye.push({name:"home"})}}function y(e,t){return v.get(e).query(t).then(function(e){return b(e)})}function C(e,t){return v.post(e).send(t).then(function(e){return b(e)})}function w(e,t){return v.put(e).send(t).then(function(e){return b(e)})}function _(e,t){return v.del(e).send(t).then(function(e){return b(e)})}var j=C.bind(null,"/api/v1/login"),x=C.bind(null,"/api/v1/reg"),U=C.bind(null,"/api/v1/findpass"),I=C.bind(null,"/api/v1/findpassverify"),S=w.bind(null,"/api/v1/password"),A=y.bind(null,"/api/v1/logout"),k=y.bind(null,"/api/v1/captcha"),$=_.bind(null,"/api/v1/captcha"),F=w.bind(null,"/api/v1/user"),R=_.bind(null,"/api/v1/user"),V=y.bind(null,"/api/v1/users"),H=y.bind(null,"/api/v1/user"),P=C.bind(null,"/api/v1/grant"),N={name:"app-header",computed:u()({},Object(o.b)({curUser:"getUserInfo",isAdmin:"isAdmin"})),data:function(){return{menuIndex:"1"}},created:function(){},sockets:{connect:function(){console.log("socket connected")},newLog:function(e){this.isAdmin&&this.$notify({type:"success",title:"new log",message:e})},adminLog:function(e){this.isAdmin&&this.$notify({type:"success",title:"admin log",message:e})},diffLogin:function(e){var t=this;console.log("diffLogin"),console.log(e.ip+"-"+e.sessionId);var a=e.user;this.$confirm("agree the different place user login?","warning",{confirmButtonText:"yes",cancelButtonText:"no",type:"warning",center:!0}).then(function(){t.$message({type:"success",message:"agree!"});var r={id:a.id,name:a.name,sessionId:e.sessionId,agree:!0};t.$socket.emit("agreeLogin",r)}).catch(function(){t.$message({type:"info",message:"do not agree"});var r={id:a.id,name:a.name,sessionId:e.sessionId,agree:!1};t.$socket.emit("agreeLogin",r)})}},methods:{logout:function(){var e=this;A({id:this.curUser.id}).then(function(t){e.$store.dispatch("delUserInfo"),e.$router.push({path:"/login"})}).catch(function(t){e.$store.dispatch("delUserInfo"),e.$router.push({path:"/login"})})}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-header",[a("el-menu",{attrs:{router:!0,"default-active":e.$route.path,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"/home"}},[e._v(" Home")]),e._v(" "),e.isAdmin?a("el-menu-item",{attrs:{index:"/backend/users"}},[e._v(" Users")]):e._e(),e._v(" "),e.isAdmin?a("el-menu-item",{attrs:{index:"/backend/categories"}},[e._v(" Categories")]):e._e(),e._v(" "),e.isAdmin?a("el-menu-item",{attrs:{index:"/backend/logs"}},[e._v(" Logs")]):e._e(),e._v(" "),a("el-submenu",{attrs:{index:""}},[a("template",{slot:"title"},[e._v(e._s(e.curUser.name))]),e._v(" "),a("el-menu-item",{attrs:{index:"/backend/profile"}},[e._v("\n        profile\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:""}},[a("i",{on:{click:function(t){e.logout()}}},[e._v("logout\n        ")])])],2)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(N,z,!1,function(e){a("E1ZE")},"data-v-663ae302",null).exports,E={name:"go-top",methods:{goTop:function(){document.documentElement.scrollTop=0}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pointer-up"},[a("i",{staticClass:"el-icon-caret-top",on:{click:function(t){e.goTop()}}})])},staticRenderFns:[]};var D=a("VU/8")(E,T,!1,function(e){a("wXUy")},"data-v-600c861c",null).exports,K=C.bind(null,"/api/v1/category"),M=w.bind(null,"/api/v1/category"),J=(w.bind(null,"/api/v1/categories"),_.bind(null,"/api/v1/category")),G=(y.bind(null,"/api/v1/category"),y.bind(null,"/api/v1/categories")),L=y.bind(null,"/api/v1/categorynames");function Q(e){return e.inner+2*e.middle+4*e.outer}function q(e){return[!!(1&e),!!(2&e),!!(4&e)]}var O=a("M4fF"),Z=a.n(O),Y={name:"home",components:{"app-header":B,"go-top":D},computed:u()({},Object(o.b)({isAdmin:"isAdmin"})),data:function(){return{categories:[],activeName:[],pageIndex:1,total:1e3,pageSize:20,searchProject:""}},created:function(){this.getCategories()},methods:{getCategories:Z.a.debounce(function(){var e=this;return G({pageIndex:this.pageIndex,pageSize:this.pageSize,getProject:1,search:this.searchProject}).then(function(t){e.categories=t.categories.rows,e.total=t.categories.count;for(var a=0;a<e.categories.length;a++){e.activeName.push(e.categories[a].id);for(var r=0;r<e.categories[a].Projects.length;r++){var o=q(e.categories[a].Projects[r].segment),n=l()(o,3),s=n[0],i=n[1],c=n[2];e.categories[a].Projects[r].segment={inner:s,middle:i,outer:c}}}e.$notify({type:"success",title:"success",message:"get categories from server"})}).catch(function(e){})},500),handleCurrentChange:function(e){this.pageIndex=e,this.getCategories()},handleSizeChange:function(e){this.pageSize=e,this.getCategories()}},watch:{searchProject:function(){this.getCategories()}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-header"),e._v(" "),a("section",{staticClass:"main"},[a("div",{staticClass:"fluid container"},[a("el-row",{staticClass:"search-project"},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"search project",type:"text",clearable:""},model:{value:e.searchProject,callback:function(t){e.searchProject=t},expression:"searchProject"}})],1)],1),e._v(" "),a("el-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.categories,function(t){return a("el-collapse-item",{key:t.id,attrs:{name:t.id}},[a("template",{slot:"title"},[a("el-tooltip",{attrs:{effect:"dark",content:t.intro,placement:"right-start"}},[e.isAdmin?a("router-link",{attrs:{to:{name:"projects",params:{categoryId:t.id}}}},[a("span",{staticClass:"category-name"},[e._v(e._s(t.name))])]):a("span",{staticClass:"category-name"},[e._v(e._s(t.name))])],1)],1),e._v(" "),a("el-row",{staticClass:"project-content",attrs:{gutter:20}},e._l(t.Projects,function(t){return a("el-col",{key:t.id,staticClass:"project-content ",attrs:{span:3}},[a("div",{staticClass:"grid-content"},[a("el-popover",{attrs:{placement:"top-start",title:t.name,width:"400",trigger:"hover"}},[a("el-row",[t.segment.inner?a("el-tag",[e._v("inner")]):e._e(),e._v(" "),t.segment.middle?a("el-tag",{attrs:{type:"warning"}},[e._v("middle")]):e._e(),e._v(" "),t.segment.outer?a("el-tag",{attrs:{type:"success"}},[e._v("outer")]):e._e()],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"project-intro",attrs:{span:12}},[a("p",[e._v(e._s(t.intro))])]),e._v(" "),a("el-col",{staticClass:"project-intro",attrs:{span:8}},[t.logo?a("img",{staticClass:"logo",attrs:{src:t.logo,alt:t.logo}}):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("p",[a("strong",{staticClass:"hint"},[e._v("*hint:")]),e._v(e._s(t.hint))])]),e._v(" "),a("el-col",{attrs:{span:8}},[t.url?a("div",[a("a",{attrs:{href:t.url,target:"_blank"}},[e._v("进入网站")])]):t.QRCode?a("div",[a("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[t.QRCode?a("img",{staticClass:"QRCode",attrs:{src:t.QRCode,alt:t.QRCode}}):e._e(),e._v(" "),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("点击下载")])],1)],1):a("div",[a("p",[e._v("no url and no QR code")])])])],1),e._v(" "),t.logo?a("img",{staticClass:"logo",attrs:{slot:"reference",src:t.logo,alt:t.logo},slot:"reference"}):e._e()],1)],1)])}))],2)}))],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("go-top")],1)],1)},staticRenderFns:[]};var X=a("VU/8")(Y,W,!1,function(e){a("60rW")},"data-v-548ae060",null).exports,ee=a("p+I1"),te=a.n(ee),ae=a("6WbS"),re=a.n(ae),oe=(a("GG98"),{name:"login",components:{dragVerify:te.a},data:function(){return{user:{phone:"",email:"",password:""},rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"目前只支持中国大陆的手机号码"}],email:[{required:!0,message:"请输入邮箱",type:"email"}],password:[{required:!0,message:"请输入密码"},{min:5,max:16,message:"长度在 5 到 16 个字符"}]},error:null,loading:!1,phone:!0,verify:{handlerIcon:"fa fa-angle-double-right",successIcon:"fa fa-check",background:"#cccccc",progressBarBg:"#FFFF99",completedBg:"#66cc66",handlerBg:"#fff",text:"swiping to the right side",successText:"success",width:220,height:40,textSize:"20px",isCircle:!0},captcha:"",code:""}},computed:u()({},Object(o.b)(["isLogin"])),created:function(){this.getCaptcha()},sockets:{connect:function(){console.log("socket connected")},agree:function(e){var t=this;e.agree?this.$store.dispatch("setUserInfo",e.user).then(function(){t.$router.replace({path:t.$route.query.redirect||"/home"}),t.loading=!1}):(this.loading=!0,this.$notify.error({title:"can not login",message:"other login user do not agree"}))}},beforeDestroy:function(){this.isLogin||this.captcha&&$({url:this.captcha})},methods:{getShape:function(){return"true"===this.verify.isCircle},getCaptcha:function(){var e=this;k().then(function(t){e.captcha=t.captcha})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.error=null,t.loading=!0;var a={password:re()(t.user.password,"about oa").toString()};t.phone?(a.phone=t.user.phone,a.email=""):(a.phone="",a.email=t.user.email),a.code=t.code,j(a).then(function(e){var a={id:e.user.id,name:e.user.name,sessionId:e.sessionId};t.$socket.emit("login",a),t.$store.dispatch("setUserInfo",e.user).then(function(){t.$router.replace({path:t.$route.query.redirect||"/home"}),t.loading=!1})}).catch(function(e){if(e.diffUser){var a={id:e.diffUser.id,name:e.diffUser.name,sessionId:e.sessionId};t.$socket.emit("login",a),t.loading=!0,t.$notify.error({title:"login in different place",message:"need to confirm on other login client"})}else t.error={title:"发生错误",message:e},t.loading=!1})})}}}),ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login"},[a("header",{staticClass:"login-header"},[a("h1",{staticClass:"brand"}),e._v(" "),e.error?a("el-alert",{attrs:{title:e.error.title,type:"warning",description:e.error.message,"show-icon":""}}):e._e()],1),e._v(" "),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"auto-complete":"off",model:e.user,"label-width":"75px",rules:e.rules}},[a("h2",{staticClass:"heading"},[e._v("Login")]),e._v(" "),a("el-form-item",[a("el-switch",{attrs:{width:50,"active-text":"phone","inactive-text":"Email"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),e.phone?a("el-form-item",{attrs:{label:"phone",prop:"phone"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter telephone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1):a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"Please enter password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"click to change captcha",placement:"right-end"}},[a("img",{staticClass:"captcha",attrs:{src:e.captcha,alt:e.code},on:{click:function(t){e.getCaptcha()}}})])],1),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submit("loginForm")}}},[e._v("\n      "+e._s(e.loading?"Loading...":"Login")+"\n    ")])],1),e._v(" "),a("footer",{staticClass:"login-footer"},[e._v("\n    forget password go to\n    "),a("router-link",{attrs:{to:"/findpass"}},[e._v("find password")])],1),a("footer",{staticClass:"login-footer"},[e._v("\n    Not a member go to\n    "),a("router-link",{attrs:{to:"/reg"}},[e._v("register")])],1)],1)},staticRenderFns:[]};var se=a("VU/8")(oe,ne,!1,function(e){a("LGy8")},null,null).exports,ie={name:"findPass",components:{dragVerify:te.a},data:function(){return{user:{name:"",email:""},active:0,rules:{email:[{required:!0,message:"请输入邮箱",type:"email"}],name:[{required:!0,message:"请输入邮箱"}]},verify:{handlerIcon:"fa fa-angle-double-right",successIcon:"fa fa-check",background:"#cccccc",progressBarBg:"#FFFF99",completedBg:"#66cc66",handlerBg:"#fff",text:"swiping to the right side",successText:"success",width:220,height:40,textSize:"20px",isCircle:!0},previewUrl:""}},created:function(){},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;U({name:t.user.name,email:t.user.email}).then(function(e){t.$notify({type:"info",title:"send find pass",message:h()(t.user)}),t.previewUrl=e.previewUrl,t.active++}).catch(function(e){t.$notify.error({title:"find password error",message:e})})})}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"main",attrs:{gutter:18}},[a("el-steps",{attrs:{active:e.active,simple:!0}},[a("el-step",{attrs:{title:"input email",icon:"el-icon-edit"}}),e._v(" "),a("el-step",{attrs:{title:"verify",icon:"el-icon-view"}})],1),e._v(" "),0===e.active?a("el-row",{staticClass:"form"},[a("el-form",{ref:"findPassForm",attrs:{"auto-complete":"on",model:e.user,"label-width":"75px",rules:e.rules}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),a("el-form-item",[a("drag-verify",{attrs:{width:e.verify.width,height:e.verify.height,text:e.verify.text,"success-text":e.verify.successText,background:e.verify.background,"progress-bar-bg":e.verify.progressBarBg,"completed-bg":e.verify.completedBg,"handler-bg":e.verify.handlerBg,"handler-icon":e.verify.handlerIcon,"text-size":e.verify.textSize,"success-icon":e.verify.successIcon,circle:e.verify.isCircle}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("findPassForm")}}},[e._v("\n        find password\n      ")])],1)],1):1===e.active?a("el-row",[a("p",[e._v("the reset password email has been send to you email,go to verify!")]),e._v(" "),a("a",{attrs:{href:e.previewUrl,target:"_blank"}},[e._v(e._s(e.previewUrl))])]):e._e()],1)},staticRenderFns:[]};var le=a("VU/8")(ie,ce,!1,function(e){a("OzDJ")},"data-v-8271ab9a",null).exports,pe={name:"resetPass",data:function(){var e=this;return{reset:{id:0,password:"",passwordR:""},verify:"",success:!1,resetRules:{password:[{required:!0,message:"请输入密码"},{min:5,max:16,message:"长度在 5 到 16 个字符"}],passwordR:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.reset.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"},{required:!0,message:"请再次输入密码",trigger:"blur"}]}}},created:function(){this.verify=this.$route.query.verify,this.getUser()},methods:{getUser:function(){var e=this;I({verify:this.verify}).then(function(t){e.reset.id=t.id,e.$notify({type:"success",title:"verify success",message:t.id})}).catch(function(t){e.$notify.error({title:"verify error",message:t})})},resetPass:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;S({id:t.reset.id,password:t.reset.password,verify:t.verify}).then(function(e){t.$notify({type:"info",title:"reset pass",message:e.info}),t.success=!0}).catch(function(e){t.$notify({type:"error",title:"reset pass",message:e}),t.success=!1})})}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"main"},[e.success?a("el-row",[e._v("\n    reset password success go to login!\n    "),a("router-link",{attrs:{to:"/login"}},[e._v("login")])],1):a("el-row",{staticClass:"resetForm"},[a("el-form",{ref:"resetPassForm",attrs:{"auto-complete":"on",model:e.reset,"label-width":"75px",rules:e.resetRules}},[a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"Please enter password"},model:{value:e.reset.password,callback:function(t){e.$set(e.reset,"password",t)},expression:"reset.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",prop:"passwordR"}},[a("el-input",{attrs:{type:"password",placeholder:"Please enter password"},model:{value:e.reset.passwordR,callback:function(t){e.$set(e.reset,"passwordR",t)},expression:"reset.passwordR"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resetPass("resetPassForm")}}},[e._v("\n        reset password\n      ")])],1)],1)],1)},staticRenderFns:[]};var me=a("VU/8")(pe,ue,!1,function(e){a("ZX80")},"data-v-a8af26e4",null).exports,de={name:"reg",components:{dragVerify:te.a},data:function(){var e=this;return{user:{phone:"",email:"",name:"",password:"",passwordR:""},rules:{name:[{required:!0,message:"请输入用户名"},{min:5,max:16,message:"长度在 5 到 16 个字符"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"目前只支持中国大陆的手机号码"}],email:[{required:!0,message:"请输入邮箱",type:"email"}],password:[{required:!0,message:"请输入密码"},{min:5,max:16,message:"长度在 5 到 16 个字符"}],passwordR:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.user.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"},{required:!0,message:"请再次输入密码",trigger:"blur"}]},error:null,loading:!1,phone:!0,verify:{handlerIcon:"fa fa-angle-double-right",successIcon:"fa fa-check",background:"#cccccc",progressBarBg:"#FFFF99",completedBg:"#66cc66",handlerBg:"#fff",text:"swiping to the right side",successText:"success",width:220,height:40,textSize:"20px",isCircle:!0}}},methods:{getShape:function(){return"true"===this.verify.isCircle},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.error=null,t.loading=!0;var a=re()(t.user.password,"about oa").toString();x({name:t.user.name,phone:t.user.phone,email:t.user.email,password:a}).then(function(e){t.$store.dispatch("setUserInfo",e.user).then(function(){t.$router.replace({path:t.$route.query.redirect||"/home"}),t.loading=!1})}).catch(function(e){t.error={title:"发生错误",message:e},t.loading=!1})})}}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login"},[a("header",{staticClass:"login-header"},[e.error?a("el-alert",{attrs:{title:e.error.title,type:"warning",description:e.error.message,"show-icon":""}}):e._e()],1),e._v(" "),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"auto-complete":"off",model:e.user,"label-width":"75px",rules:e.rules}},[a("h2",{staticClass:"heading"},[e._v("Register")]),e._v(" "),a("el-form-item",[a("el-switch",{attrs:{width:50,"active-text":"phone","inactive-text":"Email"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),e.phone?a("el-form-item",{attrs:{label:"phone",prop:"phone"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter telephone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1):a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter username"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"Please enter password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",prop:"passwordR"}},[a("el-input",{attrs:{type:"password",placeholder:"Please enter password"},model:{value:e.user.passwordR,callback:function(t){e.$set(e.user,"passwordR",t)},expression:"user.passwordR"}})],1),e._v(" "),a("el-form-item",[a("drag-verify",{attrs:{width:e.verify.width,height:e.verify.height,text:e.verify.text,"success-text":e.verify.successText,background:e.verify.background,"progress-bar-bg":e.verify.progressBarBg,"completed-bg":e.verify.completedBg,"handler-bg":e.verify.handlerBg,"handler-icon":e.verify.handlerIcon,"text-size":e.verify.textSize,"success-icon":e.verify.successIcon,circle:e.verify.isCircle}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submit("loginForm")}}},[e._v("\n      "+e._s(e.loading?"Loading...":"Register")+"\n    ")])],1),e._v(" "),a("footer",{staticClass:"login-footer"},[e._v("\n    already register go to\n    "),a("router-link",{attrs:{to:"/login"}},[e._v("login")])],1)],1)},staticRenderFns:[]};var he=a("VU/8")(de,ge,!1,function(e){a("nh98")},null,null).exports,fe={name:"backend",components:{"app-header":B},methods:{}},ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("app-header"),this._v(" "),t("section",{staticClass:"main"},[t("router-view",{staticClass:"inner"})],1)],1)},staticRenderFns:[]};var be=a("VU/8")(fe,ve,!1,function(e){a("AqaU")},"data-v-0384dbdd",null).exports,ye={name:"users",data:function(){return{users:[],total:100,search:"",pageIndex:1,pageSize:10}},created:function(){this.getUsers()},watch:{search:function(){this.getUsers()}},methods:{getUsers:Object(O.debounce)(function(){var e=this;return V({pageIndex:this.pageIndex,pageSize:this.pageSize,search:this.search}).then(function(t){e.users=t.users.rows,e.total=t.users.count}).catch(function(t){e.$notify.error({title:"error",message:t})})},500),handleGrantUser:function(e,t,a){var r=this;P({id:t.id,permission:a}).then(function(){r.$notify({type:"success",title:"grantUser",message:t.id+":"+t.name+" permission: "+t.permission+"->"+a}),t.permission=a}).catch(function(e){r.$notify({type:"error",title:"grantUser",message:e})})},handleDelUser:function(e,t){var a=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){R({id:t.id}).then(function(){a.users.splice(e,1),a.$message({type:"success",message:"删除成功!"+t.name})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(e){this.pageIndex=e,this.getUsers()},handleSizeChange:function(e){this.pageSize=e,this.getUsers()}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("users")]),e._v(" "),a("div",{staticClass:"search"},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"搜索用户",size:"medium",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:e.users,border:"",size:"medium"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intro",label:"简介",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[90===t.row.permission?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){e.handleGrantUser(t.$index,t.row,0)}}},[e._v("grant user\n          ")]):0===t.row.permission?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleGrantUser(t.$index,t.row,90)}}},[e._v("grant amdin\n          ")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelUser(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var we=a("VU/8")(ye,Ce,!1,function(e){a("HcXV")},"data-v-10a5a18a",null).exports,_e=y.bind(null,"/api/v1/logs"),je={name:"logs",data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timeZone:"",logs:[],total:100,search:"",pageIndex:1,pageSize:10}},created:function(){this.getLogs()},filters:{timestampsFilter:function(e){return e?new Date(e).toLocaleDateString():""}},watch:{search:function(){this.getLogs()}},methods:{getLogs:Object(O.debounce)(function(){var e=this,t=this.timeZone[0]||"",a=this.timeZone[1]||"";return console.log(t),console.log(a),_e({pageIndex:this.pageIndex,pageSize:this.pageSize,search:this.search,start:t,end:a}).then(function(t){e.logs=t.logs.rows,e.total=t.logs.count}).catch(function(t){e.$notify.error({title:"error",message:t})})},500),handleDatePicker:function(){this.getLogs()},handleCurrentChange:function(e){this.pageIndex=e,this.getLogs()},handleSizeChange:function(e){this.pageSize=e,this.getLogs()},formatTime:function(e,t,a,r){return a?new Date(a).toLocaleString():""}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"datePicker",attrs:{gutter:20}},[a("el-col",{staticClass:"search",attrs:{span:5}},[a("el-input",{attrs:{type:"text",clearable:!0,placeholder:"search logs"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleDatePicker},model:{value:e.timeZone,callback:function(t){e.timeZone=t},expression:"timeZone"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:18}},[a("el-table",{staticClass:"logs-table",attrs:{data:e.logs,size:"medium",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"content","header-align":"center",align:"left",label:"content"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"left",label:"time",sortable:!0,"sort-by":"createTime",formatter:e.formatTime,width:"180"}})],1)],1),e._v(" "),a("el-row",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Ue=a("VU/8")(je,xe,!1,function(e){a("kqAw")},"data-v-19200df8",null).exports,Ie=a("4LxP"),Se=a.n(Ie),Ae=a("iwQb");if("server"===Object({NODE_ENV:"production"}).VUE_ENV)var ke=Object(Ae.a)({});else{var $e=a("ytml").default,Fe=a("N1Pc");ke=Object(Ae.a)($e(Fe))}var Re=ke;var Ve=a("VU/8")(Re,null,!1,function(e){a("AgTH")},null,null).exports,He={name:"profile",components:{"vue-q-art":Se.a,pdf:Ve},data:function(){return{user:{id:0,name:"",permission:0,intro:"",phone:"",email:""},rules:{name:[{required:!0,message:"请输入用户名"},{min:5,max:16,message:"长度在 5 到 16 个字符"}],phone:[{required:!0,message:"",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"目前只支持中国大陆的手机号码"}],email:[{required:!0,message:"",type:"email"}],intro:[{required:!1,message:""},{min:20,max:120,message:"长度在 20 到 120 个字符"}]},error:null,loading:!1,config:{value:"https://www.baidu.com",imagePath:"./examples/assets/logo.png",filter:"color"},show:!0,pdfList:["","https://cdn.mozilla.net/pdfjs/tracemonkey.pdf","https://cdn.rawgit.com/mozilla/pdf.js/c6e8ca86/test/pdfs/freeculture.pdf","https://cdn.rawgit.com/mozilla/pdf.js/c6e8ca86/test/pdfs/annotation-link-text-popup.pdf","https://cdn.rawgit.com/mozilla/pdf.js/c6e8ca86/test/pdfs/calrgb.pdf","https://cdn.rawgit.com/sayanee/angularjs-pdf/68066e85/example/pdf/relativity.protected.pdf","data:application/pdf;base64,JVBERi0xLjUKJbXtrvsKMyAwIG9iago8PCAvTGVuZ3RoIDQgMCBSCiAgIC9GaWx0ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp4nE2NuwoCQQxF+/mK+wMbk5lkHl+wIFislmIhPhYEi10Lf9/MVgZCAufmZAkMppJ6+ZLUuFWsM3ZXxvzpFNaMYjEriqpCtbZSBOsDzw0zjqPHZYtTrEmz4eto7/0K54t7GfegOGCBbBdDH3+y2zsMsVERc9SoRkXORqKGJupS6/9OmMIUfgypJL4KZW5kc3RyZWFtCmVuZG9iago0IDAgb2JqCiAgIDEzOAplbmRvYmoKMiAwIG9iago8PAogICAvRXh0R1N0YXRlIDw8CiAgICAgIC9hMCA8PCAvQ0EgMC42MTE5ODcgL2NhIDAuNjExOTg3ID4+CiAgICAgIC9hMSA8PCAvQ0EgMSAvY2EgMSA+PgogICA+Pgo+PgplbmRvYmoKNSAwIG9iago8PCAvVHlwZSAvUGFnZQogICAvUGFyZW50IDEgMCBSCiAgIC9NZWRpYUJveCBbIDAgMCA1OTUuMjc1NTc0IDg0MS44ODk3NzEgXQogICAvQ29udGVudHMgMyAwIFIKICAgL0dyb3VwIDw8CiAgICAgIC9UeXBlIC9Hcm91cAogICAgICAvUyAvVHJhbnNwYXJlbmN5CiAgICAgIC9DUyAvRGV2aWNlUkdCCiAgID4+CiAgIC9SZXNvdXJjZXMgMiAwIFIKPj4KZW5kb2JqCjEgMCBvYmoKPDwgL1R5cGUgL1BhZ2VzCiAgIC9LaWRzIFsgNSAwIFIgXQogICAvQ291bnQgMQo+PgplbmRvYmoKNiAwIG9iago8PCAvQ3JlYXRvciAoY2Fpcm8gMS4xMS4yIChodHRwOi8vY2Fpcm9ncmFwaGljcy5vcmcpKQogICAvUHJvZHVjZXIgKGNhaXJvIDEuMTEuMiAoaHR0cDovL2NhaXJvZ3JhcGhpY3Mub3JnKSkKPj4KZW5kb2JqCjcgMCBvYmoKPDwgL1R5cGUgL0NhdGFsb2cKICAgL1BhZ2VzIDEgMCBSCj4+CmVuZG9iagp4cmVmCjAgOAowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDA1ODAgMDAwMDAgbiAKMDAwMDAwMDI1MiAwMDAwMCBuIAowMDAwMDAwMDE1IDAwMDAwIG4gCjAwMDAwMDAyMzAgMDAwMDAgbiAKMDAwMDAwMDM2NiAwMDAwMCBuIAowMDAwMDAwNjQ1IDAwMDAwIG4gCjAwMDAwMDA3NzIgMDAwMDAgbiAKdHJhaWxlcgo8PCAvU2l6ZSA4CiAgIC9Sb290IDcgMCBSCiAgIC9JbmZvIDYgMCBSCj4+CnN0YXJ0eHJlZgo4MjQKJSVFT0YK"],src:"",loadedRatio:0,page:1,numPages:0,rotate:0}},created:function(){this.user=this.$store.getters.getUserInfo},mounted:function(){},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.error=null,t.loading=!0,F(t.user).then(function(e){t.$store.dispatch("setUserInfo",t.user).then(function(){t.loading=!1,t.$notify({title:"success",message:"updated",type:"success"})})}).catch(function(e){t.error={title:"发生错误",message:e},t.loading=!1})})},getUser:function(){var e=this;H({id:this.user.id}).then(function(t){e.user=t.user,e.$store.dispatch("setUserInfo",t.user)}).catch(function(t){e.$notify.error({title:"error",message:t})})}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"userWrap"},[a("header",[e.error?a("el-alert",{attrs:{title:e.error.title,type:"warning",description:e.error.message,"show-icon":""}}):e._e()],1),e._v(" "),a("el-row",[a("el-form",{ref:"loginForm",attrs:{"auto-complete":"on",model:e.user,"label-width":"75px",size:"mini",rules:e.rules}},[a("h2",[e._v("Setting")]),e._v(" "),a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter username"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"phone",prop:"phone"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter telephone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"intro",prop:"intro"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"Please enter introduction"},model:{value:e.user.intro,callback:function(t){e.$set(e.user,"intro",t)},expression:"user.intro"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submit("loginForm")}}},[e._v("\n        "+e._s(e.loading?"Loading...":"Update")+"\n      ")])],1)],1),e._v(" "),a("qriously",{attrs:{value:"https://www.baidu.com",size:200}})],1)},staticRenderFns:[]};var Ne=a("VU/8")(He,Pe,!1,function(e){a("fGyq")},"data-v-52b5925b",null).exports,ze={name:"categories",components:{"go-top":D},data:function(){return{rules:{name:[{required:!0,message:"请输入类别名称"},{min:5,max:30,message:"长度在 5 到 30 个字符"}],intro:[{required:!0,message:"请输入类别描述"},{min:10,max:120,message:"长度在 10 到 120 个字符"}],order:[{required:!0,message:""}]},categories:[],categoryNames:[],targetOrder:"",pageIndex:1,total:1e3,pageSize:20,category:{id:0,name:"",intro:"",order:0},categoryFormVisible:!1,searchProject:""}},created:function(){this.getCategories()},methods:{setCateFormName:function(e){return"category"+e},handleDialogClose:function(e){this.cancelCateForm(),e()},getCateFormTitle:function(e){return e?"edit category":"add category"},addCateForm:function(){this.categoryFormVisible=!0},editCateForm:function(e){this.category=Z.a.cloneDeep(e);var t=this.categories.findIndex(function(t){return e.id===t.id});this.category.order=(this.pageIndex-1)*this.pageSize+t+1,this.categoryFormVisible=!0,this.getCategoryNames()},cancelCateForm:function(){this.categoryFormVisible=!1,this.category={id:0,name:"",intro:"",order:""}},submitCateForm:function(e){var t=this;console.log(this.$refs),this.$refs[e].validate(function(e){if(!e)return!1;t.category.id?M({category:h()(t.category)}).then(function(e){t.cancelCateForm(),t.getCategories(),t.$notify({type:"success",title:"success",message:"category update"})}).catch(function(e){t.$notify.error({title:"error",message:e})}):K({name:t.category.name,intro:t.category.intro}).then(function(e){t.cancelCateForm(),t.getCategories(),t.$notify({type:"success",title:"success",message:"category update"})}).catch(function(e){t.$notify.error({title:"error",message:e})})})},getCategoryNames:function(){var e=this;L().then(function(t){e.categoryNames=[];for(var a=0;a<t.categoryNames.length;a++)e.categoryNames.push({value:t.categoryNames[a].order,label:a+1});e.$notify({type:"success",title:"get category names"})}).catch(function(t){e.$notify.error({title:"get category names",message:t})})},getCategories:Z.a.debounce(function(){var e=this;return G({pageIndex:this.pageIndex,pageSize:this.pageSize,getProject:0,search:this.searchProject}).then(function(t){e.categories=t.categories.rows,e.total=t.categories.count,e.$notify({type:"success",title:"success",message:"get categories from server"})}).catch(function(e){})},500),handleCurrentChange:function(e){this.pageIndex=e,this.getCategories()},handleSizeChange:function(e){this.pageSize=e,this.getCategories()},deleteCategory:function(e){var t=this;this.$confirm("此操作将永久删除该类别及对应的项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){J({id:e}).then(function(a){var r=t.categories.findIndex(function(t){return t.id===e});console.log("start:"+r),r===t.categories.length-1?t.categories.pop():0===r?t.categories.shift():t.categories.splice(r,1),t.$notify({type:"success",title:"delete",message:"category delete id"+e+"-start:"+r})}).catch(function(a){t.$notify({type:"error",title:"delete",message:"category delete"+e})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}},watch:{searchProject:function(){this.getCategories()}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"main"},[a("div",{staticClass:"fluid container"},[a("el-row",{staticClass:"search-project"},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"search project",type:"text",clearable:""},model:{value:e.searchProject,callback:function(t){e.searchProject=t},expression:"searchProject"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[e._l(e.categories,function(t){return a("el-col",{key:t.id,staticClass:"category",attrs:{span:6}},[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("el-row",{staticClass:"category-intro"},[e._v("\n              "+e._s(t.intro)+"\n            ")]),e._v(" "),a("el-button-group",[a("router-link",{attrs:{to:{name:"projects",params:{categoryId:t.id}}}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-info"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){e.editCateForm(t)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){e.deleteCategory(t.id)}}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])],1)],1)}),e._v(" "),a("el-col",{staticClass:"category",attrs:{span:6}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"new category",placement:"right"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addCateForm()}}})],1)],1)],2)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("go-top")],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.getCateFormTitle(e.category.id),visible:e.categoryFormVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.categoryFormVisible=t}}},[a("div",[a("el-form",{ref:e.setCateFormName(e.category.id),staticClass:"category-form",attrs:{"auto-complete":"on",model:e.category,"label-width":"60px",size:"medium",rules:e.rules}},[a("el-form-item",{attrs:{prop:"name",label:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"Please enter name"},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"intro",label:"intro"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"Please enter intro"},model:{value:e.category.intro,callback:function(t){e.$set(e.category,"intro",t)},expression:"category.intro"}})],1),e._v(" "),e.category.id?a("el-form-item",{attrs:{prop:"order",label:"order"}},[a("el-select",{attrs:{filterable:!0,remote:!0,"automatic-dropdown":!0,placeholder:"请输入关键词","remote-method":e.getCategoryNames},model:{value:e.category.order,callback:function(t){e.$set(e.category,"order",t)},expression:"category.order"}},e._l(e.categoryNames,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelCateForm()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitCateForm(e.setCateFormName(e.category.id))}}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var Ee=a("VU/8")(ze,Be,!1,function(e){a("Wsli")},"data-v-7d23ee9c",null).exports,Te=C.bind(null,"/api/v1/project"),De=w.bind(null,"/api/v1/project"),Ke=(w.bind(null,"/api/v1/projects"),_.bind(null,"/api/v1/project")),Me=(y.bind(null,"/api/v1/project"),y.bind(null,"/api/v1/projects")),Je=y.bind(null,"/api/v1/projectnames"),Ge=_.bind(null,"/api/v1/projectimage"),Le={name:"projects",components:{"go-top":D},data:function(){var e=this;return{projectRules:{name:[{required:!0,message:"请输入项目名称"},{min:5,max:30,message:"长度在 5 到 30 个字符"}],intro:[{required:!0,message:"请输入项目描述"},{min:10,max:120,message:"长度在 10 到 120 个字符"}],url:[{required:!1,type:"url"},{validator:function(t,a,r){""===a&&""===e.project.QRCode&&r(new Error("url and QR code should not be empty at the same time!")),r()},trigger:"blur"}],QRCode:[{required:!1},{validator:function(t,a,r){""===a&&""===e.project.url&&r(new Error("url and QR code should not be empty at the same time!")),r()},trigger:"blur"}],hint:[{required:!0,message:"请输入项目hint"},{min:10,max:100,message:"长度在 10 到 100 个字符"}]},project:{changeOrder:0,changeLogo:0,changeQRCode:0,id:0,name:"",intro:"",logo:"",segment:{inner:0,middle:0,outer:0},url:"",QRCode:"",hint:"",categoryId:0},originalCategoryId:0,originalOrder:0,searchProject:"",projects:[],projectNames:[],categoryNames:[],total:1e3,pageSize:20,pageIndex:1,categoryId:0,urlType:!1,projectFormVisible:!1}},created:function(){this.categoryId=this.$route.params.categoryId,this.getProjects()},beforeRouteUpdate:function(e,t,a){},watch:{searchProject:function(){this.getProjects()}},methods:{getCategoryNames:function(){var e=this;L().then(function(t){e.categoryNames=[];for(var a=0;a<t.categoryNames.length;a++)e.categoryNames.push({value:t.categoryNames[a].id,label:t.categoryNames[a].name});e.$notify({type:"success",title:"get category names"})}).catch(function(t){e.$notify.error({title:"get category names",message:t})})},handleCategoryChange:function(e){e!==this.originalCategoryId?this.getProjectNames(1):this.getProjectNames()},getProjectNames:function(e){var t=this;Je({categoryId:this.project.categoryId}).then(function(a){t.projectNames=[];for(var r=a.projectNames.length,o=0;o<r;o++)t.projectNames.push({value:a.projectNames[o].order,label:o+1});if(e)if(0===t.projectNames.length)t.projectNames.push({value:1,label:1}),t.project.order=1;else{var n=a.projectNames[r-1].order+1;t.projectNames.push({value:n,label:r+1}),t.project.order=n}else t.project.order=t.originalOrder;t.$notify({type:"success",title:"get project names"})}).catch(function(e){t.$notify.error({title:"get project names",message:e})})},setProFormName:function(e){return"project"+e},isQRCode:function(){return this.urlType},addProForm:function(e){this.project.categoryId=e,this.projectFormVisible=!0,this.$notify({type:"info",title:"add project form",message:this.project})},editProForm:function(e){this.project=Z.a.cloneDeep(e),this.urlType=!!this.project.QRCode,this.projectFormVisible=!0,this.originalCategoryId=this.project.categoryId,this.originalOrder=this.project.order,this.getCategoryNames(),this.getProjectNames(0)},handleDialogClose:function(e){this.cancelProForm(1,1),e()},cancelProForm:function(e,t){this.projectFormVisible=!1;var a=this.project.logo,r=this.project.QRCode;e&&a&&this.project.changeLogo&&this.removeImage(a),t&&r&&this.project.changeQRCode&&this.removeImage(r),this.project={changeOrder:0,changeLogo:0,changeQRCode:0,id:0,name:"",intro:"",logo:"",segment:{inner:0,middle:0,outer:0},url:"",QRCode:"",hint:"",categoryId:0},this.originalCategoryId=0,this.originalOrder=0,this.urlType=!1},submitProForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.project.id){var a=Z.a.omit(t.project,["changeOrder","changeLogo","changeQRCode"]);a.segment=Q(a.segment);var r=0;t.urlType?a.url="":(a.QRCode="",r=1),console.log("in form update project"+h()(a)),console.log("removeQRCode:"+r),De({project:h()(a)}).then(function(e){t.cancelProForm(0,r),t.getProjects()}).catch(function(e){t.$notify.error({title:"update project",message:e})})}else{var o=Z.a.omit(t.project,["id","changeOrder","changeLogo","changeQRCode","order"]);o.segment=Q(o.segment);var n=q(o.segment),s=l()(n,3),i=s[0],c=s[1],p=s[2],u=0;t.urlType?o.url="":(o.QRCode="",u=1),console.log(h()(o)),Te(o).then(function(e){t.cancelProForm(0,u),t.getProjects(),t.$notify({type:"success",title:"create project",message:"segment:"+o.segment+":"+i+"-"+c+"-"+p})}).catch(function(e){t.$notify({type:"error",title:"create project",message:e})})}})},getProjects:Z.a.debounce(function(){var e=this;return Me({categoryId:this.categoryId,pageIndex:this.pageIndex,pageSize:this.pageSize,search:this.searchProject}).then(function(t){e.projects=t.projects.rows.map(function(e){var t=q(e.segment),a=l()(t,3),r=a[0],o=a[1],n=a[2];return e.changeOrder=0,e.changeLogo=0,e.changeQRCode=0,e.segment={inner:r,middle:o,outer:n},e}),e.total=t.projects.count,e.$notify({type:"success",title:"success",message:"get projects from server"})}).catch(function(e){})},500),setUploadData:function(e){return{type:e}},handleLogoError:function(e,t,a){console.log("logo error"),console.log(e)},uploadLogo:function(e,t,a){console.log("after uploadLogo success");var r=this.project.logo;r&&this.project.changeLogo&&this.removeImage(r),this.project.logo=e.url,this.project.changeLogo=1,this.$notify({type:"success",title:"logo response",message:e})},uploadQRCode:function(e,t,a){console.log("after upload QR code success");var r=this.project.QRCode;r&&this.project.changeQRCode&&this.removeImage(r),this.project.QRCode=e.url,this.project.changeQRCode=1,this.$notify({type:"success",title:"QRCode response",message:e})},beforeLogoUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG, PNG, GIF 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},removeImage:function(e){var t=this;Ge({image:e}).then(function(e){t.$notify({type:"success",title:"remove image"})}).catch(function(e){t.$notify({type:"error",title:"remove image",message:e})})},handleCurrentChange:function(e){this.pageIndex=e,this.getProjects()},handleSizeChange:function(e){this.pageSize=e,this.getProjects()},deleteProject:function(e){var t=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Ke({id:e}).then(function(a){var r=t.projects.findIndex(function(t){return t.id===e});console.log("del project proIndex:"+r),r===t.projects.length-1?t.projects.pop():0===r?t.projects.shift():t.projects.splice(r,1),t.$notify({type:"success",title:"delete",message:"project delete id-proIndex:"+e+"-"+r})}).catch(function(a){t.$notify({type:"error",title:"delete",message:"project delete"+e})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},Qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",[a("h1",[e._v("projects")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"searchProject",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"search project",type:"text",clearable:""},model:{value:e.searchProject,callback:function(t){e.searchProject=t},expression:"searchProject"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:22}},[e._l(e.projects,function(t){return a("el-col",{key:t.id,staticClass:"project-content",attrs:{span:3}},[a("el-popover",{attrs:{placement:"top-start",title:t.name,width:"400",trigger:"hover"}},[a("el-row",[t.segment.inner?a("el-tag",[e._v("inner")]):e._e(),e._v(" "),t.segment.middle?a("el-tag",{attrs:{type:"warning"}},[e._v("middle")]):e._e(),e._v(" "),t.segment.outer?a("el-tag",{attrs:{type:"success"}},[e._v("outer")]):e._e()],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"project-intro",attrs:{span:12}},[a("p",[e._v(e._s(t.intro))])]),e._v(" "),a("el-col",{staticClass:"project-intro",attrs:{span:8}},[t.logo?a("img",{staticClass:"logo",attrs:{src:t.logo,alt:t.logo}}):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("p",[a("strong",{staticClass:"hint"},[e._v("*hint:")]),e._v(e._s(t.hint))])]),e._v(" "),a("el-col",{attrs:{span:8}},[t.url?a("div",[a("a",{attrs:{href:t.url,target:"_blank"}},[e._v("进入网站")])]):t.QRCode?a("div",[a("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[t.QRCode?a("img",{staticClass:"QRCode",attrs:{src:t.QRCode,alt:t.QRCode}}):e._e(),e._v(" "),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("点击下载")])],1)],1):a("div",[a("p",[e._v("no url and no QR code")])])])],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"success",icon:"el-icon-edit-outline"},on:{click:function(a){e.editProForm(t)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){e.deleteProject(t.id)}}})],1),e._v(" "),t.logo?a("img",{staticClass:"logo",attrs:{slot:"reference",src:t.logo,alt:t.logo},slot:"reference"}):e._e()],1)],1)}),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"new project",placement:"right"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addProForm(e.categoryId)}}})],1)],1)],2),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("go-top")],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"new project",visible:e.projectFormVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.projectFormVisible=t}}},[a("div",[a("el-form",{ref:e.setProFormName(e.project.id),attrs:{model:e.project,"label-width":"70px","auto-complete":"on",rules:e.projectRules}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hint",prop:"hint"}},[a("el-input",{attrs:{type:"text"},model:{value:e.project.hint,callback:function(t){e.$set(e.project,"hint",t)},expression:"project.hint"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"intro",prop:"intro"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.project.intro,callback:function(t){e.$set(e.project,"intro",t)},expression:"project.intro"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"logo",prop:"logo"}},[a("el-upload",{ref:"uploadLogo",staticClass:"avatar-uploader",attrs:{multiple:!1,"show-file-list":!1,data:e.setUploadData(0),action:"/api/v1/projectimage","before-upload":e.beforeLogoUpload,"on-error":e.handleLogoError,"on-success":e.uploadLogo}},[e.project.logo?a("img",{staticClass:"avatar",attrs:{src:e.project.logo,alt:e.project.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",[a("el-switch",{attrs:{"active-text":"QR code","inactive-text":"web url"},model:{value:e.urlType,callback:function(t){e.urlType=t},expression:"urlType"}})],1),e._v(" "),e.isQRCode()?a("el-form-item",{attrs:{label:"code",prop:"QRCode"}},[a("el-upload",{ref:"uploadQRCode",staticClass:"avatar-uploader",attrs:{multiple:!1,"show-file-list":!1,data:e.setUploadData(1),action:"/api/v1/projectimage","before-upload":e.beforeLogoUpload,"on-error":e.handleLogoError,"on-success":e.uploadQRCode}},[e.project.QRCode?a("img",{staticClass:"avatar",attrs:{src:e.project.QRCode,alt:e.project.QRCode}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{attrs:{type:"text",placeholder:"web url"},model:{value:e.project.url,callback:function(t){e.$set(e.project,"url",t)},expression:"project.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"segment",prop:"segment"}},[a("el-checkbox",{model:{value:e.project.segment.inner,callback:function(t){e.$set(e.project.segment,"inner",t)},expression:"project.segment.inner"}},[e._v("inner")]),e._v(" "),a("el-checkbox",{model:{value:e.project.segment.middle,callback:function(t){e.$set(e.project.segment,"middle",t)},expression:"project.segment.middle"}},[e._v("middle")]),e._v(" "),a("el-checkbox",{model:{value:e.project.segment.outer,callback:function(t){e.$set(e.project.segment,"outer",t)},expression:"project.segment.outer"}},[e._v("outer")])],1),e._v(" "),e.project.id?a("el-form-item",{attrs:{label:"category",prop:"categoryId"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请输入关键词","remote-method":e.getCategoryNames},on:{change:e.handleCategoryChange},model:{value:e.project.categoryId,callback:function(t){e.$set(e.project,"categoryId",t)},expression:"project.categoryId"}},e._l(e.categoryNames,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),e.project.id?a("el-form-item",{attrs:{prop:"order",label:"order"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请输入关键词","remote-method":e.getProjectNames},model:{value:e.project.order,callback:function(t){e.$set(e.project,"order",t)},expression:"project.order"}},e._l(e.projectNames,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelProForm(1,1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitProForm(e.setProFormName(e.project.id))}}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var qe=a("VU/8")(Le,Qe,!1,function(e){a("atfY")},"data-v-65f663dd",null).exports;r.default.use(i.a);var Oe=[{path:"/",name:"",component:X,meta:{requiresAuth:!0}},{path:"/reg",name:"reg",component:he,meta:{requiresNotAuth:!0}},{path:"/login",name:"login",component:se,meta:{requiresNotAuth:!0}},{path:"/findpass",name:"findPass",component:le,meta:{requiresNotAuth:!0}},{path:"/resetpass",name:"resetPass",component:me,meta:{requiresNotAuth:!0}},{path:"/home",name:"home",component:X,meta:{requiresAuth:!0}},{path:"/backend",name:"backend",component:be,meta:{requiresAuth:!0},children:[{path:"profile",name:"profile",component:Ne,meta:{requiresAuth:!0}},{path:"",name:"main",component:Ee,meta:{requiresAdmin:!0}},{path:"users",name:"users",component:we,meta:{requiresAdmin:!0}},{path:"logs",name:"logs",component:Ue,meta:{requiresAdmin:!0}},{path:"categories",name:"categories",component:Ee,meta:{requiresAdmin:!0}},{path:"projects/:categoryId",name:"projects",component:qe,meta:{requiresAdmin:!0}}]}],Ze=new i.a({routes:Oe});Ze.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.requiresAuth})?e.matched.some(function(e){return e.meta.requiresAdmin})?f.getters.isAdmin?a():a({path:"/home"}):f.getters.isLogin?a():a({path:"/login",query:{redirect:e.fullPath}}):e.matched.some(function(e){return e.meta.requiresNotAuth})&&f.getters.isLogin?a({path:"/home"}):a()});var Ye=Ze,We=a("zL8q"),Xe=a.n(We),et=(a("tvR6"),a("f3u+")),tt=a.n(et),at=a("AbOu"),rt=a("kto1"),ot=a("ufP2"),nt=a("3Q1+"),st={name:"ElCollapseItemAbout",componentName:"ElCollapseItemAbout",mixins:[ot.a],components:{ElCollapseTransition:rt.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}}},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1},id:function(){return Object(nt.a)()}},methods:{handleFocus:function(){var e=this;setTimeout(function(){e.isClick?e.isClick=!1:e.focusing=!0},50)},handleHeaderClick:function(){this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},it={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive}},[a("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[a("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:"0"},on:{click:e.handleHeaderClick,focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[a("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}}),e._v(" "),e._t("title",[e._v(e._s(e.title))])],2)]),e._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[a("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)},staticRenderFns:[]},ct=a("VU/8")(st,it,!1,null,null,null).exports,lt=a("hMcO"),pt=a.n(lt),ut=a("DmT9"),mt=a.n(ut);r.default.use(tt.a),r.default.use(at.default),r.default.component(ct.name,ct),r.default.use(pt.a,mt()("http://localhost:3000")),r.default.use(Xe.a),r.default.use(i.a),r.default.use(o.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:Ye,store:f,components:{App:s},template:"<App/>"})},OzDJ:function(e,t){},POKh:function(e,t,a){"use strict";var r={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var e=this.$el.firstChild,t=this.$el.lastChild;e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(e){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(e){var t="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",a="position: absolute; left: 0; top: 0;";return e("div",{style:t+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[e("div",{style:t,on:{scroll:this.update}},[e("div",{style:a+"width: 100000px; height: 100000px;"})]),e("div",{style:t,on:{scroll:this.update}},[e("div",{style:a+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var e=function(){this.update(),t()}.bind(this),t=function(){this.$el.detachEvent("onresize",e),this.$off("resizeSensorBeforeDestroy",t)}.bind(this);this.$el.attachEvent("onresize",e),this.$on("resizeSensorBeforeDestroy",t),this.reset()}}};var o=a("VU/8")(r,null,!1,function(e){a("8Y90")},null,null);t.a=o.exports},Wsli:function(e,t){},ZX80:function(e,t){},atfY:function(e,t){},fGyq:function(e,t){},kqAw:function(e,t){},nh98:function(e,t){},r1po:function(e,t){},s347:function(e,t){},tvR6:function(e,t){},wXUy:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f3c3af61b60dec6760b4.js.map